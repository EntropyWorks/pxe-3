# Kickstart file automatically generated by anaconda.

#version=DEVEL
text
install
url --url=http://192.168.11.9/os/centos63-64
lang en_US.UTF-8
keyboard us
#random hostname
network --onboot yes --device eth0 --bootproto dhcp --noipv6
rootpw  gdcloud!.2013
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
services --disabled cpuspeed,sendmail
services --enabled ntpd
timezone --utc Asia/Shanghai

zerombr
ignoredisk --only-use=xvda
clearpart --all --drives=xvda  --initlabel
bootloader --location=mbr --driveorder=xvda --append="crashkernel=auto rhgb quiet"

part /boot --fstype=ext4 --size=500
part pv.202002 --grow --size=1

volgroup vg00 --pesize=4096 pv.202002
logvol swap --name=lv_swap --vgname=vg00 --size=4096
logvol / --fstype=ext4 --name=lv_root --vgname=vg00 --size=1 --grow

%packages
@core
@server-policy
@additional-devel
@base
@chinese-support
@client-mgmt-tools
@compat-libraries
@core
@basic-desktop
@desktop-platform
@development
@fonts
@general-desktop
#@graphical-admin-tools
@hardware-monitoring
#@input-methods
@internet-browser
#@nfs-file-server
@network-file-system-client
@network-tools
@perl-runtime
@print-client
@remote-desktop-clients
#@ruby-runtime
@server-platform
@server-platform-devel
@system-management
@system-admin-tools
@x11
@storage-client-iscsi
libXinerama-devel
openmotif-devel
libXmu-devel
xorg-x11-proto-devel
libgnomeui-devel
libbonobo-devel
junit
libXau-devel
libgcrypt-devel
popt-devel
libdrm-devel
libXrandr-devel
libxslt-devel
libglade2-devel
gnutls-devel
pax
python-dmidecode
oddjob
wodim
%end

reboot

%post --log=/tmp/ks-post.log
#!/bin/bash
sed -i '/^id/s/3/5/' /etc/inittab
eject
wget -P /tmp http://192.168.11.9/pxe/ks/linux/centos/6.3/x86_64/firstrun-vm.sh
echo 'sh /tmp/firstrun-vm.sh' >> /etc/rc.local
