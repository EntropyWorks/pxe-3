# Kickstart file automatically generated by anaconda.

#install version=DEVEL
text
install
url --url=http://192.168.11.9/os/linux/rhel/6.3/x86_64

lang en_US.UTF-8
keyboard us

#network --onboot yes --device eth0 --bootproto dhcp --noipv6 --hostname=rhels6u3-64
network --onboot yes --device eth0 --bootproto dhcp --noipv6

#rootpw  --iscrypted $6$b2P12ol4lJPDxEgJ$/BoHDCgohcHg93jTa3NLCsDgQO2b/zvXH8WBxUggR/fqmc.6QICZBt5nZ5jFXYZiLG7nl5CvmVAAGQ1fystq60
rootpw gdcloud!.2013

firewall --disabled
firstboot --disabled

authconfig --enableshadow --passalgo=sha512
selinux --disabled
services --disabled cpuspeed,sendmail
services --enabled ntpd
timezone Asia/Shanghai

# logging --host= --level=info

#repo --name= --baseurl=
#repo --name= --mirrorlist=

#start vncserver
#vnc
# vnc --host= --port= --password=

ignoredisk --only-use=xvda
bootloader --location=mbr --driveorder=xvda --append="crashkernel=auto rhgb quiet"

# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work

zerombr
clearpart --all --drives=xvda  --initlabel

#part /boot --fstype=ext4 --size=512
#part swap --size=32768
#part / --fstype=ext4 --grow --size=200

# LVM
part /boot --fstype=ext4 --size=500
part pv.202002 --grow --size=1

volgroup vg_volgroup00 --pesize=4096 pv.202002

logvol swap --name=lv_swap --vgname=vg_volgroup00 --size=16384
logvol / --fstype=ext4 --name=lv_root --vgname=vg_volgroup00 --size=51208

#logvol / --fstype=ext4 --name=lv_root --vgname=vg_volgroup00 --percent=100
#logvol / --fstype=ext4 --name=lv_root --vgname=vg_volgroup00 --size=503456


#%include

#%packages --ignoremissing
%packages
@additional-devel
@base
#@cifs-file-server
@chinese-support
#@client-mgmt-tools
@compat-libraries
@core
#@debugging
@basic-desktop
#@desktop-debugging
@desktop-platform
#@desktop-platform-devel
@development
#@directory-client
#@ftp-server
@fonts
@general-desktop
#@graphical-admin-tools
#@hardware-monitoring
@input-methods
@internet-browser
@java-platform
#@large-systems
#@legacy-unix
#@legacy-x
#@mainframe-access
#@mysql-client
#@mysql
@nfs-file-server
@network-file-system-client
@network-tools
#@php
#@performance
@perl-runtime
#@print-client
#@remote-desktop-clients
@ruby-runtime
#@system-management-snmp
#@security-tools
@server-platform
@server-platform-devel
@server-policy
#@storage-client-multipath
@system-management
@system-admin-tools
#@system-management-messaging-server
#@web-server
#@web-servlet
#@system-management-wbem
@x11
@storage-client-iscsi
libXinerama-devel
openmotif-devel
libXmu-devel
xorg-x11-proto-devel
#startup-notification-devel
libgnomeui-devel
libbonobo-devel
junit
libXau-devel
libgcrypt-devel
popt-devel
libdrm-devel
libXrandr-devel
libxslt-devel
libglade2-devel
gnutls-devel
pax
python-dmidecode
oddjob
wodim
sgpio
#genisoimage
mtools
#systemtap-client
abrt-gui
desktop-file-utils
ant
#rpmdevtools
jpackage-utils
rpmlint
certmonger
pam_krb5
krb5-workstation
tcp_wrappers
openmotif
xterm
libXmu
libXp
perl-DBD-MySQL
perl-DBD-SQLite
hmaccalc
crypto-utils
#certmonger
perl-CGI
tog-pegasus
-autofs
libXfont
pixman
tigervnc-server
%end

reboot

%post --log=/root/ks-post.log
#!/bin/bash
sed -i '/^id/s/3/5/' /etc/inittab
eject
wget -P /tmp http://192.168.11.9/pxe/scripts/postrun/firstrun.sh
echo 'sh /tmp/firstrun.sh' >> /etc/rc.local
